import{processCtx,drawEntities,getCanvas}from"./js/utils.js";import{Car}from"./js/car.js";import{Road}from"./js/road.js";const{canvas,ctx,factory}=getCanvas(200),road=new Road({x:canvas.width/2,width:.9*canvas.width}),car=new Car({x:road.getLaneCenter(1),y:100,model:"sedan",control:!0}),traffic=[new Car({x:road.getLaneCenter(1),y:-100,model:"sedan"}),new Car({x:road.getLaneCenter(0),y:80,model:"sedan"}),new Car({x:road.getLaneCenter(2),y:10,model:"sedan"}),new Car({x:road.getLaneCenter(2),y:120,model:"sedan"})],animate=()=>{for(let i=0;i<traffic.length;i++)traffic[i].update(road.borders,[]);car.update(road.borders,traffic),canvas.height=window.innerHeight,ctx.save(),ctx.translate(0,-car.y+.7*canvas.height),road.draw(ctx);for(let i=0;i<traffic.length;i++)traffic[i].draw(ctx,"purple");car.draw(ctx,"blue"),ctx.restore(),requestAnimationFrame(animate)};animate();